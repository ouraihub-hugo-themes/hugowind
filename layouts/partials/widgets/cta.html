{{- /*
  CallToAction Widget - 复刻 AstroWind CallToAction.astro
  参考: astrowind/src/components/widgets/CallToAction.astro
  
  参数:
    - id: 可选，section 的 ID
    - isDark: 可选，是否使用暗色背景
    - tagline: 可选，标签行
    - title: 可选，主标题
    - subtitle: 可选，副标题
    - actions: 可选，按钮数组
      - text: 按钮文本
      - href: 链接地址
      - variant: 按钮变体 (primary, secondary, tertiary, link)
      - target: 链接目标 (_blank, _self)
      - icon: 图标名称
    - bg: 可选，自定义背景 HTML
    - classes: 可选，自定义样式类
  
  Requirements: 1.9
*/ -}}

{{- $id := .id | default "" -}}
{{- $isDark := .isDark | default false -}}
{{- $tagline := .tagline | default "" -}}
{{- $title := .title | default "" -}}
{{- $subtitle := .subtitle | default "" -}}
{{- $actions := .actions | default slice -}}
{{- $bg := .bg | default "" -}}
{{- $classes := .classes | default dict -}}

{{- /* 构建容器类 - 注意：widget-wrapper 已有 mx-auto，这里只设置 max-w */ -}}
{{- $containerClass := printf "max-w-6xl %s" ($classes.container | default "") -}}

{{- /* 构建内容 */ -}}
{{- $content := "" -}}

{{- /* CTA 卡片容器 */ -}}
{{- $content = printf "%s%s" $content `<div class="max-w-3xl mx-auto text-center p-6 rounded-md shadow-xl dark:shadow-none dark:border dark:border-slate-600">` -}}

{{- /* Headline 部分 - 使用自定义样式 */ -}}
{{- $headlineClasses := dict 
  "container" "mb-0 md:mb-0"
  "title" "text-4xl md:text-4xl mb-4"
  "subtitle" "dark:text-slate-400"
-}}
{{- $content = printf "%s%s" $content (partial "ui/headline.html" (dict "title" $title "subtitle" $subtitle "tagline" $tagline "classes" $headlineClasses)) -}}

{{- /* Actions 按钮组 */ -}}
{{- if $actions -}}
{{- $actionsHtml := `<div class="max-w-xs sm:max-w-md m-auto flex flex-nowrap flex-col sm:flex-row sm:justify-center gap-4 mt-6">` -}}
{{- range $actions -}}
{{- $actionsHtml = printf `%s<div class="flex w-full sm:w-auto">%s</div>` $actionsHtml (partial "ui/button.html" (dict "text" .text "href" .href "variant" (.variant | default "secondary") "target" .target "icon" .icon "class" "w-full sm:mb-0")) -}}
{{- end -}}
{{- $actionsHtml = printf "%s%s" $actionsHtml `</div>` -}}
{{- $content = printf "%s%s" $content $actionsHtml -}}
{{- end -}}

{{- $content = printf "%s%s" $content `</div>` -}}

{{- /* 使用 WidgetWrapper 渲染 */ -}}
{{- partial "ui/widget-wrapper.html" (dict
  "id" $id
  "isDark" $isDark
  "containerClass" $containerClass
  "bg" $bg
  "content" $content
) -}}
